/* by @manufosela - browserclosurenotice.js - Browser Closure Notice - 20150525 - v1.1 */
BrowserClosureNotice=function(){"use strict";var t=function(t){this.stepsTakenToClose=t.stepsTakenToClose||10,this.distanceNearClose=t.distanceNearClose||100,this.maxTimes=t.maxTimes||1,this.callbackBrowserClosureNotice=t.callback||function(){alert("really you want to go?")},this.oldx=0,this.oldy=0,this.w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.distanceWidth=this.isApple()?this.distanceNearClose:this.w-this.distanceNearClose,this.goup=0,this.godown=0,this.goright=0,this.goleft=0,this.moreTimes=!0,this.times=0};return t.prototype.detect=function(){var t=this;document.addEventListener&&document.addEventListener("mousemove",function(e){t.mousemovemethod(e)}),document.attachEvent&&document.attachEvent("onmousemove",function(e){t.mousemovemethod(e)})},t.prototype.unDetect=function(){var t=this;document.removeEventListener&&document.removeEventListener("mousemove",t.mousemovemethod,!1),document.detachEvent&&document.detachEvent("onmousemove",t.mousemovemethod)},t.prototype.mousemovemethod=function(t){var e,o=this.getMousePos(t),s=this.isApple(),i=s?o.x<this.distanceWidth:o.x>this.distanceWidth;o.x<this.oldx?(this.goright=0,this.goleft++):o.x>this.oldx&&(this.goright++,this.goleft=0),o.y<this.oldy?(this.goup++,this.godown=0):o.y>this.oldy&&(this.goup=0,this.godown++),e=s?this.goleft:this.goright,o.y<this.distanceNearClose&&this.goup>=this.stepsTakenToClose&&i&&e>=this.stepsTakenToClose&&this.moreTimes&&(this.times++,this.moreTimes=this.times<this.maxTimes||0===this.maxTimes,this.unDetect(),this.callbackBrowserClosureNotice()),this.oldx=o.x,this.oldy=o.y},t.prototype.isIE=function(){var t=navigator.userAgent.toLowerCase();return~t.indexOf("msie")?parseInt(t.split("msie")[1]):!1},t.prototype.isApple=function(){var t=navigator.userAgent.toLowerCase();return!!~t.indexOf("mac os x")},t.prototype.getMousePos=function(t){var e,o;return this.isIE()?(e=event.clientX+document.body.scrollLeft,o=event.clientY+document.body.scrollTop):(e=t.pageX,o=t.pageY),0>e&&(e=0),0>o&&(o=0),{x:e,y:o}},t}();